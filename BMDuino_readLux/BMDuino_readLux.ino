/*****************************************************************************************************
檔案名稱： BMDuino_readLux.ino
檔案說明： 本範例展示如何初始化 VEML7700 感測器，並讀取環境光照度（Lux）數值。
注意事項： 
******************************************************************************************************/

// 引入 BME82M131 函式庫，該函式庫用於控制 VEML7700 環境光感測器
#include "BME82M131.h"

// 宣告 BME82M131 物件，命名為 ALS
// 參數說明：
//   2   : 中斷腳位（INT pin）接在 Arduino 的腳位 2
//   &Wire: 使用 Arduino 預設的 I2C 通訊埠（Wire）
// 若使用 Wire1（第二組 I2C），請將此行程式碼註解，並取消下面對應的程式碼
// BME82M131 ALS(2, &Wire);     

// 若在 BMduino 上使用 Wire1（第一組額外 I2C），請取消下一行的註解，並將上面一行註解掉
BME82M131 ALS(22, &Wire1); 

// 若在 BMduino 上使用 Wire2（第二組額外 I2C），請取消下一行的註解，並將上面一行註解掉
// BME82M131 ALS(25, &Wire1); 

/**
 * 初始化函式，僅在 Arduino 啟動時執行一次
 */
void setup()
{
  // 初始化序列通訊，設定鮑率為 9600，用於與電腦通訊（透過序列埠監視視窗顯示資料）
  Serial.begin(9600);
  
  // 初始化環境光感測器（VEML7700），包含 I2C 通訊與感測器設定
  ALS.begin();
  
  // 讀取並輸出連接到 I2C 匯流排上的模組數量
  Serial.print(ALS.getNumber());
  Serial.print(" 個模組已 ");
  Serial.println("連線完成！");
}

/**
 * 主迴圈函式，會重複不斷執行
 */
void loop()
{
  // 輸出提示文字，表示即將顯示感測器 1 的照度值
  Serial.print("Lux1: ");
  
  // 讀取編號為 1 的感測器的照度值（單位：Lux），並透過序列埠輸出
  Serial.println( ALS.readLux(1) );     
  
  // 延遲 1000 毫秒（1 秒），避免資料輸出過快，方便觀察讀數
  delay(1000);
}